<!DOCTYPE html>
<html lang="pl">
  <head>
    <meta charset="utf-8">
    <title>Pong Game</title>
    <link rel="stylesheet" type="text/css" href="style.css" media="all">
  </head>
  <body>
    <canvas id="canvas" width="600" height="300"></canvas>

    <script type="text/javascript">
      const canvas = document.querySelector('canvas');
      const ctx = canvas.getContext('2d'); //wywołanie metody

      canvas.width = 1000;
      canvas.height = 500;

      const cw = canvas.width; //utworzenie zmiennej canvas width
      const ch = canvas.height; //utworzenie zmiennej canvas height

      const ballSize = 20; //wielkośc piłki

      let ballX = cw/2 - ballSize/2;
      let ballY = ch/2 - ballSize/2;
      let ballR = 15;

      const paddelHeight = 100;
      const paddelWidth = 20;

      const playerX = 70;
      const aiX = 910;

      let playerY = 200;
      let aiY = 200;

      const lineWidth = 6;
      const lineHeight = 16;

      let ballSpeedX = 4;
      let ballSpeedY = 4;

      function player(){
        ctx.fillStyle = 'orange';
        ctx.fillRect(playerX,playerY,paddelWidth,paddelHeight);
      }

      function ai(){
        ctx.fillStyle = 'orange';
        ctx.fillRect(aiX,aiY,paddelWidth,paddelHeight);
      }

      function ball(){
        ctx.beginPath();
        ctx.arc(ballX,ballY,ballR,0*Math.PI,2*Math.PI);
        ctx.strokeStyle = 'white';
        ctx.stroke();
        ctx.lineWidth = 0;
        ctx.fillStyle = 'white';
        ctx.fill();

        ballX += ballSpeedX;
        ballY += ballSpeedY;

        if(ballY <= 0 || ballY + ballSize >=ch){
          ballSpeedY = -ballSpeedY;
        speedUp()
        }

        if(ballX <= 0 || ballX + ballSize >=cw){
          ballSpeedX = -ballSpeedX
        speedUp()
        }

      }

      function table(){
        //Stół
        ctx.fillStyle = 'black';
        ctx.fillRect(0,0,cw,ch); //wartośc początkowa na osi x, wartośc początkowa na osi y, długośc(ile pikseli na osi x), szerokośc(ile pikseli na osi y)
        //Linie na środku

        for (let linePosition = 20; linePosition < ch; linePosition +=30){
          ctx.fillStyle = 'gray';
          ctx.fillRect(cw/2 - lineWidth/2,linePosition,lineWidth,lineHeight)
        }
      }
      function game(){
        table()
        ball()
        player()
        ai()
      }

      setInterval(game,1000/120)

      topCanvas = canvas.offsetTop;
      console.log("topCanvas")

      function playerPosition(e){
        //console.log("pozycja myszy to" + (e.clientY - topCanvas))
        playerY = e.clientY - topCanvas - paddelHeight/2;
        if (playerY >= ch - paddelHeight){
          playerY = ch - paddelHeight
        }
        if (playerY <= 0){
          playerY = 0;
        }
      }

      function speedUp(){
        //prędkośc X
        if(ballSpeedX > 0 && ballSpeedX < 16){
          ballSpeedX += .4;
        }
        else if(ballSpeedX < 0 && ballSpeedX > -16){
          ballSpeedX -= .4;
        }
        //prędkośc Y
        if(ballSpeedY > 0 && ballSpeedY < 16){
          ballSpeedY += .4;
        }
        else if(ballSpeedY < 0 && ballSpeedY > -16){
          ballSpeedY -= .4;
        }
      }
      function collision(){
      if (paddel1.playerX < ball.ballX + ball.ballSize &&
          paddel1.playerX + paddel1.paddelWidth > ball.ballX &&
          paddel1.playerY < ball.ballSize + ball.ballSize &&
          paddel1.paddelHeight + paddel1.playerY > ball.playerY) {
        ballSpeedX = -ballSpeedX
      }
      }
      canvas.addEventListener('mousemove',playerPosition)

    </script>

  </body>
</html>
